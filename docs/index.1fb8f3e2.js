const e=new URL("https://rockpaperscissor-30d3e-default-rtdb.europe-west1.firebasedatabase.app/highscore.json");async function t(){return await fetch(e).then(e=>e.json()).catch(e=>console.error(e))}async function o(t){await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(e=>console.error(e))}const n=new class{highScore;async initHighScore(){this.highScore=await t()}async addHighScoreEntry(e){e.score>=this.highScore[this.highScore.length-1].score&&(this.highScore=[...this.highScore,e].toSorted((e,t)=>t.score-e.score).splice(0,5),o(this.highScore))}};!async function(){let e,t,o;let r=["Rock","Paper","Scissor"],c=["RockScissor","PaperRock","ScissorPaper"],i=document.querySelectorAll("#playerButtons > button"),a=document.querySelector("#playerMoveView > h1"),s=document.querySelector("#computerMoveView> h1"),h=document.getElementById("playerScore"),l=document.getElementById("nameButton"),d=document.getElementById("highScore");await n.initHighScore();let m=0;async function u(o){e=o.target.value,console.log(t=r[Math.floor(Math.random()*r.length)]),await g(e,t),a.innerText=e,s.innerText=t,h.innerText=m}async function g(e,t){if(e===t){console.log("equal moves");return}c.includes(e+t)?(console.log("player score increase"),m++):(console.log("game over"),await n.addHighScoreEntry({name:o,score:m}),d.innerHTML=n.highScore.map(e=>`<li>${e.name} - ${e.score}</li>`).join(""),alert("game over"),m=0,h.innerText=m,a.innerText="",s.innerText="")}d.innerHTML=n.highScore.map(e=>`<li>${e.name} - ${e.score}</li>`).join(""),l.addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("name").value,n=document.createElement("h1");n.innerText=t,o=t,document.getElementById("nameForm").replaceWith(n),i.forEach(e=>e.removeAttribute("disabled"))}),i.forEach(e=>e.addEventListener("click",u))}();
//# sourceMappingURL=index.1fb8f3e2.js.map
